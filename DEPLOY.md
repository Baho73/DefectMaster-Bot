# üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é DefectMaster Bot

## ‚ö†Ô∏è –í–ê–ñ–ù–û: –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–ø–ª–æ—è

### üìã –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –¥–µ–ø–ª–æ—è (–∏—Å–ø–æ–ª—å–∑—É–π –í–°–ï–ì–î–ê)

```bash
# 1. –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ
git add .
git commit -m "–û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π"
git push origin master

# 2. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä
scp <–∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ_—Ñ–∞–π–ª—ã> root@5.180.24.215:/root/defectmaster-bot/

# 3. –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û: –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
ssh root@5.180.24.215 "cd /root/defectmaster-bot && docker compose down && docker compose up -d --build"

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –∏ –≤–µ—Ä—Å–∏—é
sleep 5
ssh root@5.180.24.215 "cd /root/defectmaster-bot && docker compose logs --tail=30 bot"
```

---

## ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û (–Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å!)

```bash
# ‚ùå –ù–ï –î–ï–õ–ê–ô –¢–ê–ö - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç—Å—è!
docker compose restart bot
```

**–ü–æ—á–µ–º—É –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:** `restart` –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å–æ —Å—Ç–∞—Ä—ã–º –∫–æ–¥–æ–º. –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã –Ω–µ –ø–æ–ø–∞–¥–∞—é—Ç –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä!

---

## ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û

```bash
# ‚úÖ –î–ï–õ–ê–ô –¢–ê–ö - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç—Å—è —Å –Ω–æ–≤—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏
docker compose down && docker compose up -d --build
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. `down` - –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∏ —É–¥–∞–ª—è–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
2. `up -d` - —Å–æ–∑–¥–∞–µ—Ç –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –Ω–æ–≤—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
3. `--build` - –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç –æ–±—Ä–∞–∑ —Å –Ω–æ–≤—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏ –∏–∑ `COPY . .` –≤ Dockerfile

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏—é –≤ config.py –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
ssh root@5.180.24.215 "grep BOT_VERSION /root/defectmaster-bot/config.py"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –∑–∞–ø—É—Å–∫–∞
ssh root@5.180.24.215 "cd /root/defectmaster-bot && docker compose logs --tail=50 bot | grep 'Bot started'"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ Telegram –±–æ—Ç–µ
# –û—Ç–ø—Ä–∞–≤–∏—Ç—å /start –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º—É—é –≤–µ—Ä—Å–∏—é
```

---

## üìù –ü—Ä–∏–º–µ—Ä—ã –∫–æ–º–∞–Ω–¥ –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤

### –û–¥–∏–Ω —Ñ–∞–π–ª
```bash
scp config.py root@5.180.24.215:/root/defectmaster-bot/config.py
```

### –ù–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤
```bash
scp bot/handlers/common.py bot/handlers/photo.py root@5.180.24.215:/root/defectmaster-bot/bot/handlers/
```

### –í–µ—Å—å –∫–∞—Ç–∞–ª–æ–≥
```bash
scp -r bot/handlers/ root@5.180.24.215:/root/defectmaster-bot/bot/
```

---

## üêõ –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏

### –û—à–∏–±–∫–∞ 1: –í–µ—Ä—Å–∏—è –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
**–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª `restart` –≤–º–µ—Å—Ç–æ `down && up --build`
**–†–µ—à–µ–Ω–∏–µ:** –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–ª–Ω—É—é –ø–µ—Ä–µ—Å–±–æ—Ä–∫—É

### –û—à–∏–±–∫–∞ 2: –ó–∞–±—ã–ª —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä
**–ü—Ä–æ–±–ª–µ–º–∞:** –ó–∞–∫–æ–º–º–∏—Ç–∏–ª –≤ git, –Ω–æ –Ω–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–ª –Ω–∞ —Å–µ—Ä–≤–µ—Ä
**–†–µ—à–µ–Ω–∏–µ:** –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `scp` –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–æ–π

### –û—à–∏–±–∫–∞ 3: –ù–µ –ø—Ä–æ–≤–µ—Ä–∏–ª —Ä–µ–∑—É–ª—å—Ç–∞—Ç
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ –ø—Ä–æ–≤–µ—Ä–∏–ª –ª–æ–≥–∏ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è
**–†–µ—à–µ–Ω–∏–µ:** –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π –ª–æ–≥–∏ –∏ –≤–µ—Ä—Å–∏—é –≤ –±–æ—Ç–µ

---

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–µ–ø–ª–æ—è

```
–õ–æ–∫–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞ (D:\Python\Stroykontrol_mvp_01)
    ‚Üì git push
GitHub (github.com/Baho73/DefectMaster-Bot)

–õ–æ–∫–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞
    ‚Üì scp
–°–µ—Ä–≤–µ—Ä (5.180.24.215:/root/defectmaster-bot)
    ‚Üì docker compose down && up --build
Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (defectmaster-bot)
```

---

## üéØ –ë—ã—Å—Ç—Ä–∞—è —à–ø–∞—Ä–≥–∞–ª–∫–∞

```bash
# –¢–∏–ø–∏—á–Ω—ã–π –¥–µ–ø–ª–æ–π –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
git add config.py && git commit -m "Update version" && git push
scp config.py root@5.180.24.215:/root/defectmaster-bot/
ssh root@5.180.24.215 "cd /root/defectmaster-bot && docker compose down && docker compose up -d --build"

# –¢–∏–ø–∏—á–Ω—ã–π –¥–µ–ø–ª–æ–π –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤
git add . && git commit -m "Fix bugs" && git push
scp bot/handlers/common.py bot/services/ai_service.py config.py root@5.180.24.215:/root/defectmaster-bot/bot/handlers/ root@5.180.24.215:/root/defectmaster-bot/bot/services/ root@5.180.24.215:/root/defectmaster-bot/
ssh root@5.180.24.215 "cd /root/defectmaster-bot && docker compose down && docker compose up -d --build"
```

---

## üìä –ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π —á–µ–∫–ª–∏—Å—Ç

- [ ] –ö–æ–¥ –∑–∞–∫–æ–º–º–∏—á–µ–Ω –≤ git
- [ ] –ö–æ–¥ –∑–∞–ø—É—à–µ–Ω –Ω–∞ GitHub
- [ ] –§–∞–π–ª—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä —á–µ—Ä–µ–∑ scp
- [ ] –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω: `down && up --build`
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –ª–æ–≥–∏: `docker compose logs`
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –≤–µ—Ä—Å–∏—è –≤ –±–æ—Ç–µ: `/start`
- [ ] –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## üÜò –û—Ç–∫–∞—Ç –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â—É—é –≤–µ—Ä—Å–∏—é

```bash
# 1. –û—Ç–∫–∞—Ç–∏—Ç—å git
git revert HEAD
git push

# 2. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã
scp <—Ñ–∞–π–ª—ã> root@5.180.24.215:/root/defectmaster-bot/

# 3. –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å
ssh root@5.180.24.215 "cd /root/defectmaster-bot && docker compose down && docker compose up -d --build"
```
