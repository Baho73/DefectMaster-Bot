# Changelog

Все значимые изменения в проекте DefectMaster Bot будут документированы в этом файле.

Формат основан на [Keep a Changelog](https://keepachangelog.com/ru/1.0.0/),
и проект придерживается [Semantic Versioning](https://semver.org/lang/ru/).

## [1.0.0] - 2025-11-20

### Добавлено
- Базовая структура Telegram бота на aiogram 3.x
- Интеграция с Google Gemini 1.5 Flash для анализа фотографий
- Автоматическое выявление строительных дефектов
- Привязка дефектов к нормам РФ (СНиП, ГОСТ, СП)
- Интеграция с Google Sheets API для создания отчетов
- Интеграция с Google Drive API для хранения фотографий
- Система балансов и кредитов для пользователей
- Интеграция с Tinkoff Merchant API для приема платежей
- База данных SQLite для хранения пользователей и платежей
- Команды бота:
  - `/start` - Регистрация и создание таблицы
  - `/new` - Установка контекста объекта
  - `/balance` - Проверка баланса и покупка кредитов
  - `/table` - Получение ссылки на таблицу
  - `/help` - Справка
- Автоматическое создание персональной Google Таблицы для каждого пользователя
- 5 бесплатных анализов для новых пользователей
- Определение нерелевантных фото с юмористическими ответами
- Форматирование результатов анализа для чата
- Логирование истории анализов

### Документация
- README.md с полным описанием проекта
- QUICKSTART.md для быстрого старта
- DEPLOYMENT.md с подробной инструкцией по развертыванию
- Примеры конфигурационных файлов (.env.example)
- systemd service файл для автозапуска
- Dockerfile и docker-compose.yml для контейнеризации
- Скрипт test_setup.py для проверки настроек

### Безопасность
- Все секреты вынесены в переменные окружения
- Service Account для безопасной работы с Google APIs
- Защита от несанкционированного доступа к данным
- .gitignore для исключения секретов из репозитория

### Инфраструктура
- Поддержка развертывания через systemd
- Поддержка Docker/Docker Compose
- Скрипты для автоматического бэкапа БД
- Логирование через systemd journal

## [Unreleased]

### Планируется
- Webhook для уведомлений от Tinkoff (альтернатива polling)
- Админ-панель для управления пользователями
- Экспорт отчетов в PDF
- Поддержка нескольких языков (EN, RU)
- Статистика использования для пользователей
- Кэширование результатов Google Drive API
- Rate limiting для предотвращения злоупотреблений
- Поддержка групповых чатов
- Интеграция с Notion для отчетов
- Telegram Web App для расширенного интерфейса

---

## Типы изменений
- `Добавлено` - новая функциональность
- `Изменено` - изменения в существующей функциональности
- `Устарело` - функциональность, которая будет удалена
- `Удалено` - удаленная функциональность
- `Исправлено` - исправления багов
- `Безопасность` - изменения, связанные с безопасностью
